let pokemonRepository = function () { let e = []; function t(t) { "object" == typeof t && "name" in t ? e.push(t) : console.log("pokemon is not correct") } function n() { return e } function o(e) { return fetch(e.detailsUrl).then(function (e) { return e.json() }).then(function (t) { e.imageUrl = t.sprites.front_default, e.height = t.height, e.types = t.types }).catch(function (e) { console.error(e) }) } function i(e) { pokemonRepository.loadDetails(e).then(function () { document.getElementById("pokemonModal"); let t = document.getElementById("modalTitle"), n = document.getElementById("modalImage"), o = document.getElementById("modalHeight"), i = document.getElementById("modalTypes"); t.textContent = e.name, n.src = e.imageUrl; let l = e.height / 10; o.textContent = "Height: " + l + "m", i.textContent = "Types: " + e.types.map(e => e.type.name.charAt(0).toUpperCase() + e.type.name.slice(1)).join(", "); let a = document.getElementById("pokemonModal"); a.classList.add("is-visible"); function s() { a.classList.remove("is-visible") } document.querySelector(".modal-close").addEventListener("click", s), window.addEventListener("keydown", e => { "Escape" === e.key && a.classList.contains("is-visible") && s() }), a.addEventListener("click", e => { e.target === a && s() }) }) } return { add: t, getAll: n, addListItem: function e(t) { let n = document.querySelector(".pokemon-list"), l = document.createElement("li"), a = document.createElement("div"); a.classList.add("pokemon-item"), o(t).then(function () { let e = document.createElement("img"); e.src = t.imageUrl, e.alt = t.name + " image", a.appendChild(e); let n = document.createElement("button"); n.innerText = t.name, n.classList.add("button-class"), a.appendChild(n), n.addEventListener("click", function (e) { i(t) }) }), l.appendChild(a), n.appendChild(l) }, loadList: function e() { return fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then(function (e) { return e.json() }).then(function (e) { e.results.forEach(function (e) { t({ name: e.name, detailsUrl: e.url }) }) }).catch(function (e) { console.error(e) }) }, loadDetails: o, showDetails: i } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) });